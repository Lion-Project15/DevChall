<html layout:decorate="~{usr/member/layout.html}" xmlns="http://www.w3.org/1999/html">

<html>
<head>
    <meta charset="UTF-8">
    <title>챌린지 디테일 페이지</title>
</head>

<body>
<script>

    function wantJoin(challengeId) {
        if (confirm('해당 챌린지에 참여하시겠습니까?')) {
            alert("환영합니다! 챌린지에 열심히 참여해보세요!");
            location.href = "/usr/challenge/join/" + challengeId;
        } else {
            alert("참여가 취소되었습니다.");
        }
    }

</script>

<main layout:fragment="main" class="flex flex-col justify-center">

    <div class="card w-90 shadow-xl">
        <figure class="px-10 pt-10">
            <img src="/images/logo.png" class="w-[250px] h-[250px] rounded-xl" alt="logo_image"/>
        </figure>
        <div class="card-body text-white">
            <h2 class="card-title">챌린지 이름</h2>
            <p th:text="${challenge.challengeName}"></p>

            <h2 class="card-title">챌린지 내용</h2>
            <p th:text="${challenge.challengeContents}"></p>

            <h2 class="card-title">챌린지 공개 여부</h2>
            <p th:text="${challenge.challengeStatus}"></p>

            <h2 class="card-title">챌린지 이미지 소스</h2>
            <p th:text="${challenge.challengeImg}"></p>

            <h2 class="card-title">챌린지 태그</h2>
            <p th:text="${challenge.challengeTag}"></p>

            <h2 class="card-title">챌린지 주간 인증 빈도</h2>
            <p th:text="${challenge.challengeFrequency}"></p>

            <h2 class="card-title">챌린지 시작일</h2>
            <p th:text="${challenge.startDate}"></p>

            <h2 class="card-title">챌린지 종료일</h2>
            <p th:text="${challenge.endDate}"></p>

            <div class="card-actions justify-end">
                <th:block th:unless="${isJoin}">
                    <div>
                        <button th:onclick="'wantJoin(\'' + ${challenge.id} + '\')'" class="btn btn-accent flex justify-center">참여하기</button>
                    </div>
                </th:block>

                <th:block th:if="${isJoin}">
                    <a th:href="@{|/usr/challenge/write_form/${challenge.id}|}" class="btn btn-accent flex justify-center">
                        <button>챌린지 인증하기</button>
                    </a>
                </th:block>
            </div>
        </div>
    </div>

<!--<h2>챌린지 이름</h2>-->
<!--<p th:text="${challenge.challengeName}"></p>-->

<!--<h2>챌린지 내용</h2>-->
<!--<p th:text="${challenge.challengeContents}"></p>-->

<!--<h2>챌린지 공개 여부</h2>-->
<!--<p th:text="${challenge.challengeStatus}"></p>-->

<!--<h2>챌린지 이미지 소스</h2>-->
<!--<p th:text="${challenge.challengeImg}"></p>-->

<!--<h2>챌린지 태그</h2>-->
<!--<p th:text="${challenge.challengeTag}"></p>-->

<!--<h2>챌린지 주간 인증 빈도</h2>-->
<!--<p th:text="${challenge.challengeFrequency}"></p>-->

<!--<h2>챌린지 시작일</h2>-->
<!--<p th:text="${challenge.startDate}"></p>-->

<!--<h2>챌린지 종료일</h2>-->
<!--<p th:text="${challenge.endDate}"></p>-->

<!--<th:block th:unless="${isJoin}">-->
<!--    <div>-->
<!--        <button th:onclick="'wantJoin(\'' + ${challenge.id} + '\')'">참여하기</button>-->
<!--    </div>-->
<!--</th:block>-->

<!--<th:block th:if="${isJoin}">-->
<!--    <a th:href="@{|/usr/challenge/write_form/${challenge.id}|}">-->
<!--        <button>챌린지 인증하기</button>-->
<!--    </a>-->
<!--</th:block>-->


<th:block th:unless="${hasPost}">
    <div>
        인증글이 존재하지 않습니다.
    </div>
</th:block>

<th:block th:if="${hasPost}">
    <!-- 인증글 내용 -->
    <div th:each="post : ${challengePostList}">
        <div>

            <td>
                <a th:href="@{|/usr/challenge/postdetail/${post.id}|}" th:text="${post.postTitle}"></a>
            </td>

            <td th:text="${post.postContents}"></td>
        </div>

    </div>
</th:block>

</main>
</body>