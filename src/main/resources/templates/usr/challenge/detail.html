<html>
<head>
    <meta charset="UTF-8">
    <title>챌린지 디테일 페이지</title>
</head>

<body>
<script>

    function wantJoin(challengeId) {
        if (confirm('해당 챌린지에 참여하시겠습니까?')) {
            alert("환영합니다! 챌린지에 열심히 참여해보세요!");
            location.href = "/usr/challenge/join/" + challengeId;
        } else {
            alert("참여가 취소되었습니다.");
        }
    }

</script>

<p>챌린지 이름</p>
<h1 th:text="${challenge.challengeName}"></h1>

<p>챌린지 내용</p>
<div th:text="${challenge.challengeContents}"></div>

<p>챌린지 공개 여부</p>
<div th:text="${challenge.challengeStatus}"></div>

<p>챌린지 이미지 소스</p>
<div th:text="${challenge.challengeImg}"></div>

<p>챌린지 태그</p>
<div th:text="${challenge.challengeTag}"></div>

<p>챌린지 주간 인증 빈도</p>
<div th:text="${challenge.challengeFrequency}"></div>

<p>챌린지 시작일</p>
<div th:text="${challenge.startDate}"></div>

<p>챌린지 종료일</p>
<div th:text="${challenge.endDate}"></div>

<th:block th:unless="${isJoin}">
    <div>
        <button th:onclick="'wantJoin(\'' + ${challenge.id} + '\')'">참여하기</button>
    </div>
</th:block>

<th:block th:if="${isJoin}">
    <a th:href="@{|/usr/challenge/write_form/${challenge.id}|}">
        <button>챌린지 인증하기</button>
    </a>
</th:block>


<th:block th:unless="${hasPost}">
    <div>
        인증글이 존재하지 않습니다.
    </div>
</th:block>

<th:block th:if="${hasPost}">
    <!-- 인증글 내용 -->
    <div th:each="post : ${challengePostList}">
        <div>

            <td>
                <a th:href="@{|/usr/challenge/postdetail/${post.id}|}" th:text="${post.postTitle}"></a>
            </td>

            <td th:text="${post.postContents}"></td>
        </div>

    </div>
</th:block>

</body>